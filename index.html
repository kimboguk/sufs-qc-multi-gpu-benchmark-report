<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qiskit Aer Multi-GPU 성능 벤치마크 보고서</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: white;
            color: #333;
            padding: 40px;
            text-align: center;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            color: #333;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .highlight-box {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #e0e0e0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #e0e0e0;
        }
        
        .stat-card .value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-card .label {
            font-size: 0.9em;
            color: #666;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background: #f8f8f8;
            color: #333;
            font-weight: bold;
            border-bottom: 2px solid #ddd;
        }
        
        tr:hover {
            background-color: #fafafa;
        }
        
        .success {
            color: #333;
            font-weight: bold;
        }
        
        .warning {
            color: #666;
            font-weight: bold;
        }
        
        .danger {
            color: #999;
            font-weight: bold;
        }
        
        .badge {
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            font-weight: bold;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .badge-success {
            background-color: #f0f0f0;
            color: #333;
        }
        
        .badge-warning {
            background-color: #f5f5f5;
            color: #666;
        }
        
        .badge-danger {
            background-color: #f8f8f8;
            color: #999;
        }
        
        .insight-box {
            background-color: white;
            border-left: 4px solid #999;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .recommendation {
            background-color: white;
            border-left: 4px solid #666;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        
        .performance-bar {
            background-color: #f0f0f0;
            border-radius: 8px;
            overflow: hidden;
            height: 30px;
            position: relative;
            border: 1px solid #e0e0e0;
        }
        
        .performance-fill {
            background: #ddd;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-weight: bold;
            transition: width 0.3s ease;
        }
        
        .graph-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin: 30px 0;
            border: 1px solid #e0e0e0;
        }
        
        .graph-container img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .graph-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
        }
        
        .footer {
            background: white;
            color: #666;
            padding: 30px;
            text-align: center;
            border-top: 2px solid #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Qiskit Aer Multi-GPU 성능 벤치마크</h1>
            <div style="margin-top: 10px; font-size: 1em; color: #666;">RTX 4090 × 4 양자 시뮬레이션 성능 분석 보고서<br>2025년 10월 13일</div>
        </div>

        <div class="content">
            <!-- Executive Summary -->
            <div class="section">
                <h2>📊 Executive Summary</h2>
                
                <div class="highlight-box">
                    <h3>핵심 발견</h3>
                    <ul>
                        <li><strong>Single GPU 한계:</strong> 최대 30 qubits (16GB GPU 메모리)</li>
                        <li><strong>Multi-GPU 한계:</strong> 최대 33 qubits (96GB GPU 메모리, 실용적으로는 32 qubits)</li>
                        <li><strong>평균 CPU 대비 GPU 가속:</strong> 4.53배</li>
                        <li><strong>최대 가속:</strong> 8.75배 (20 qubits)</li>
                        <li><strong>Multi-GPU 효과:</strong> 31-32 qubits를 실행 가능하게 만듦 (질적 차이)</li>
                    </ul>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="label">최대 가속</div>
                        <div class="value">8.75×</div>
                        <div class="label">CPU vs GPU</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">Single GPU 최대</div>
                        <div class="value">30</div>
                        <div class="label">qubits</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">Multi-GPU 최대</div>
                        <div class="value">33</div>
                        <div class="label">qubits</div>
                    </div>
                    <div class="stat-card">
                        <div class="label">평균 가속</div>
                        <div class="value">4.53×</div>
                        <div class="label">CPU vs GPU</div>
                    </div>
                </div>
            </div>

            <!-- Performance Graphs -->
            <div class="section">
                <h2>📈 성능 벤치마크 그래프</h2>
                
                <div class="graph-container">
                    <div class="graph-title">Qiskit Aer GPU Performance Benchmark (RTX 4090)</div>
                    <p style="text-align: center; color: #666; margin-bottom: 20px;">
                        4개 벤치마크 테스트: Qubit Scaling, GPU Speedup, Circuit Depth, Batch Processing
                    </p>
                    <img src="gpu_benchmark_results.png" alt="GPU Performance Benchmark Results">
                </div>

                <div class="insight-box">
                    <strong>💡 그래프 주요 인사이트:</strong>
                    <ul>
                        <li><strong>좌상단 (Qubit Scaling):</strong> 큐빗 수 증가에 따른 CPU vs GPU 실행 시간 비교 (로그 스케일)</li>
                        <li><strong>우상단 (GPU Speedup Factor):</strong> 15, 20, 25 큐빗에서 각각 0.8×, 7.4×, 6.2× 가속 확인</li>
                        <li><strong>좌하단 (Circuit Depth):</strong> 20 큐빗에서 회로 깊이 증가에 따른 성능, GPU가 일관되게 우수</li>
                        <li><strong>우하단 (Batch Processing):</strong> 배치 크기 증가 시 GPU의 압도적 효율성 (최대 2.4× 향상)</li>
                    </ul>
                </div>
            </div>

            <!-- Test 1: Qubit Scaling -->
            <div class="section">
                <h2>🔬 Test 1: 큐빗 수 증가에 따른 성능</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th>큐빗 수</th>
                            <th>CPU 시간</th>
                            <th>GPU 시간</th>
                            <th>가속 비율</th>
                            <th>상태</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>10</td>
                            <td>0.029s</td>
                            <td>0.666s</td>
                            <td class="danger">0.04×</td>
                            <td><span class="badge badge-danger">GPU 오버헤드</span></td>
                        </tr>
                        <tr>
                            <td>15</td>
                            <td>0.004s</td>
                            <td>0.005s</td>
                            <td class="warning">0.81×</td>
                            <td><span class="badge badge-warning">거의 동일</span></td>
                        </tr>
                        <tr>
                            <td>20</td>
                            <td>0.066s</td>
                            <td>0.007s</td>
                            <td class="success">8.75×</td>
                            <td><span class="badge badge-success">최적 구간</span></td>
                        </tr>
                        <tr>
                            <td>25</td>
                            <td>0.437s</td>
                            <td>0.051s</td>
                            <td class="success">8.53×</td>
                            <td><span class="badge badge-success">최적 구간</span></td>
                        </tr>
                        <tr>
                            <td>28</td>
                            <td>-</td>
                            <td>0.371s</td>
                            <td>-</td>
                            <td><span class="badge badge-success">GPU 필수</span></td>
                        </tr>
                        <tr>
                            <td>30</td>
                            <td>-</td>
                            <td>1.504s</td>
                            <td>-</td>
                            <td><span class="badge badge-success">GPU 필수</span></td>
                        </tr>
                    </tbody>
                </table>

                <div class="insight-box">
                    <strong>💡 주요 인사이트:</strong> 20-25 qubits 구간에서 GPU의 최대 효율을 보입니다. 
                    10 qubits 이하에서는 GPU 초기화 오버헤드가 계산 이득보다 크므로 CPU가 더 효율적입니다.
                </div>
            </div>

            <!-- Test 2: Multi-GPU Large Scale -->
            <div class="section">
                <h2>🚀 Test 2: Multi-GPU 대규모 시뮬레이션</h2>
                
                <div style="margin: 20px 0;">
                    <strong>테스트 조건:</strong> blocking_enable=True, blocking_qubits=23 (4 GPU 분산)
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>큐빗 수</th>
                            <th>메모리 요구량</th>
                            <th>Single GPU</th>
                            <th>Multi-GPU (4×)</th>
                            <th>Multi-GPU 가속</th>
                            <th>상태</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>30</td>
                            <td>16 GB</td>
                            <td>1.562s</td>
                            <td>0.984s</td>
                            <td class="success">1.59×</td>
                            <td><span class="badge badge-success">양쪽 성공</span></td>
                        </tr>
                        <tr>
                            <td>31</td>
                            <td>32 GB</td>
                            <td class="danger">실패</td>
                            <td>1.913s</td>
                            <td>-</td>
                            <td><span class="badge badge-success">Multi-GPU만 가능</span></td>
                        </tr>
                        <tr>
                            <td>32</td>
                            <td>64 GB</td>
                            <td class="danger">실패</td>
                            <td>3.997s</td>
                            <td>-</td>
                            <td><span class="badge badge-success">Multi-GPU만 가능</span></td>
                        </tr>
                        <tr>
                            <td>33</td>
                            <td>128 GB</td>
                            <td class="danger">실패</td>
                            <td class="warning">68.030s</td>
                            <td>-</td>
                            <td><span class="badge badge-warning">매우 느림</span></td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <h3>🔥 Multi-GPU의 핵심 가치</h3>
                    <p>30 qubits에서 1.59배 속도 향상도 의미있지만, 진정한 가치는 <strong>31-32 qubits를 실행 가능하게 만든다</strong>는 점입니다.</p>
                    <p style="margin-top: 15px;">메모리 압박으로 인한 성능 저하가 급격하게 발생합니다. 실질적인 한계는 32 qubits로 볼 수 있습니다.</p>
                </div>
            </div>

            <!-- Real-time Monitoring -->
            <div class="section">
                <h2>📡 실시간 모니터링 스냅샷</h2>
                
                <div style="margin: 20px 0;">
                    <strong>벤치마크 실행 중 캡처된 nvidia-smi 출력 (2025-10-13 11:33:42)</strong>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>GPU</th>
                            <th>활용도</th>
                            <th>메모리 사용</th>
                            <th>메모리 비율</th>
                            <th>전력 소비</th>
                            <th>온도</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>GPU 0</strong></td>
                            <td class="warning">47%</td>
                            <td>23762 MiB</td>
                            <td>
                                <div class="performance-bar" style="height: 20px; margin: 5px 0;">
                                    <div class="performance-fill" style="width: 96.7%; font-size: 0.85em;">96.7%</div>
                                </div>
                            </td>
                            <td>68W / 450W</td>
                            <td>34°C</td>
                        </tr>
                        <tr>
                            <td><strong>GPU 1</strong></td>
                            <td class="success">98%</td>
                            <td>23733 MiB</td>
                            <td>
                                <div class="performance-bar" style="height: 20px; margin: 5px 0;">
                                    <div class="performance-fill" style="width: 96.6%; font-size: 0.85em;">96.6%</div>
                                </div>
                            </td>
                            <td>73W / 450W</td>
                            <td>32°C</td>
                        </tr>
                        <tr>
                            <td><strong>GPU 2</strong></td>
                            <td class="success">98%</td>
                            <td>23733 MiB</td>
                            <td>
                                <div class="performance-bar" style="height: 20px; margin: 5px 0;">
                                    <div class="performance-fill" style="width: 96.6%; font-size: 0.85em;">96.6%</div>
                                </div>
                            </td>
                            <td>68W / 450W</td>
                            <td>33°C</td>
                        </tr>
                        <tr>
                            <td><strong>GPU 3</strong></td>
                            <td class="success">99%</td>
                            <td>23693 MiB</td>
                            <td>
                                <div class="performance-bar" style="height: 20px; margin: 5px 0;">
                                    <div class="performance-fill" style="width: 96.4%; font-size: 0.85em;">96.4%</div>
                                </div>
                            </td>
                            <td>72W / 450W</td>
                            <td>33°C</td>
                        </tr>
                        <tr style="background: #f0f0f0; font-weight: bold;">
                            <td>총계</td>
                            <td>86%</td>
                            <td>94.9 GB</td>
                            <td>96.6% (평균)</td>
                            <td>281W / 1800W</td>
                            <td>33°C (평균)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <h3>🔥 Multi-GPU 작동의 실증</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; box-shadow: 0 1px 4px rgba(0,0,0,0.05);">
                            <strong>✅ 4개 GPU 동시 활용</strong>
                            <p style="margin-top: 5px; font-size: 0.95em;">GPU 1-3: 98-99% 활용률<br>GPU 0: 47% (주 GPU, 조정 역할)</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; box-shadow: 0 1px 4px rgba(0,0,0,0.05);">
                            <strong>✅ 메모리 완전 활용</strong>
                            <p style="margin-top: 5px; font-size: 0.95em;">총 94.9GB 사용<br>각 GPU 96% 이상 사용</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; box-shadow: 0 1px 4px rgba(0,0,0,0.05);">
                            <strong>✅ 단일 프로세스</strong>
                            <p style="margin-top: 5px; font-size: 0.95em;">PID 21535 (Python)<br>MPI 없이 자동 분산</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px; border: 1px solid #e0e0e0; box-shadow: 0 1px 4px rgba(0,0,0,0.05);">
                            <strong>✅ 효율적 전력 사용</strong>
                            <p style="margin-top: 5px; font-size: 0.95em;">281W / 1800W (15.6%)<br>메모리 집약적 작업</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Findings -->
            <div class="section">
                <h2>🔍 주요 발견 사항</h2>

                <h3>1. GPU 가속 효율 구간</h3>
                <table style="margin-top: 15px;">
                    <thead>
                        <tr>
                            <th>큐빗 범위</th>
                            <th>권장 설정</th>
                            <th>효율성</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>≤10 qubits</strong></td>
                            <td>CPU 권장</td>
                            <td>
                                <div class="performance-bar" style="margin: 0;">
                                    <div class="performance-fill" style="width: 10%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>15-30 qubits</strong></td>
                            <td>Single GPU 최적</td>
                            <td>
                                <div class="performance-bar" style="margin: 0;">
                                    <div class="performance-fill" style="width: 85%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>31-32 qubits</strong></td>
                            <td>Multi-GPU 필수</td>
                            <td>
                                <div class="performance-bar" style="margin: 0;">
                                    <div class="performance-fill" style="width: 95%;"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>33 qubits</strong></td>
                            <td>가능하나 매우 느림</td>
                            <td>
                                <div class="performance-bar" style="margin: 0;">
                                    <div class="performance-fill" style="width: 60%; background: #aaa;"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h3>2. Multi-GPU의 가치</h3>
                <div class="insight-box">
                    <strong>양적 개선:</strong> 30 qubits에서 1.6배 속도 향상<br>
                    <strong>질적 개선:</strong> 31-32 qubits를 실행 가능하게 만듦 (2³ = 8배 더 큰 문제 공간)
                </div>

                <h3>3. 메모리 제약</h3>
                <div class="insight-box">
                    <p><strong>큐빗과 메모리 요구량의 지수적 증가:</strong></p>
                    <ul style="margin-top: 10px;">
                        <li>각 큐빗는 상태 공간을 2배로 증가시킴</li>
                        <li><strong style="background: #f0f0f0; padding: 2px 6px; border-radius: 3px;">33 qubits: 128GB (시스템 한계선)</strong></li>
                        <li><strong style="background: #f0f0f0; padding: 2px 6px; border-radius: 3px;">34 qubits: 256GB (현재 시스템으로 불가능)</strong></li>
                        <li>더 큰 시뮬레이션을 위해서는 추가 GPU 또는 클러스터 필요</li>
                    </ul>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="section">
                <h2>💡 권장사항</h2>

                <div class="recommendation">
                    <h3>작업 규모별 최적 설정</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>큐빗 범위</th>
                                <th>권장 설정</th>
                                <th>예상 성능</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>≤ 10 qubits</td>
                                <td>CPU</td>
                                <td>빠름</td>
                            </tr>
                            <tr>
                                <td>11-30 qubits</td>
                                <td>Single GPU</td>
                                <td>CPU 대비 4-9배 가속</td>
                            </tr>
                            <tr>
                                <td>31-32 qubits</td>
                                <td>Multi-GPU (4개, blocking_enable=True)</td>
                                <td>Single GPU 불가능 → 가능</td>
                            </tr>
                            <tr>
                                <td>33 qubits</td>
                                <td>Multi-GPU (느림, 권장하지 않음)</td>
                                <td>68초 (매우 느림)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Conclusion -->
            <div class="section">
                <h2>🎯 결론</h2>

                <div class="highlight-box">
                    <p>이번 벤치마크는 Multi-GPU 시스템이 양자 시뮬레이션에서 단순한 속도 향상을 넘어 
                    <strong>실행 불가능한 문제를 실행 가능하게 만드는 질적 변화</strong>를 가져온다는 것을 입증했습니다.</p>
                    
                    <p style="margin-top: 15px;"><strong>핵심 성과:</strong></p>
                    <ul>
                        <li>Single GPU 대비 최대 실행 가능한 큐빗 수: 30 → 32 (상태 공간 4배 증가)</li>
                        <li>평균 4.53배의 CPU 대비 가속</li>
                        <li>자동 Multi-GPU 지원으로 별도 MPI 설정 불필요</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Generated: 2025년 10월 13일</p>
            <p>System: RTX 4090 × 4 | CUDA 11.5 | Qiskit Aer GPU</p>
            <p style="margin-top: 15px; font-size: 0.9em;">
                이 보고서는 실제 벤치마크 결과를 기반으로 작성되었습니다.
            </p>
            <p style="margin-top: 20px; font-weight: bold; color: #333;">
                © SUFS 2025, All Rights Reserved.
            </p>
        </div>
    </div>
</body>
</html>
